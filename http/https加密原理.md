## https加密原理

### 为什么不能直接用对称加密？

**对称性加密**采用同样的密钥进行加解密，服务器向客户端明文发送密钥一旦被劫持，密钥便泄露

### 为什么不能直接用非对称加密？

**非对称加密**有一对公钥和私钥，服务器把公钥以明文的形式发送给客户端，客户端将数据用公钥加密后发送给服务器，服务端用私钥解密。这样的加密方式，客户端流向服务端的数据是安全的，因为只有私钥能解密，但是服务端流向客户端的数据并不安全，一旦公钥被劫持，劫持者便可以伪造成目标客户端和服务端通信，拿到服务端的数据

### 对称性加密+非对称性加密？

假设有非对称性公钥A、私钥A'  

服务器端向客户端发送公钥 A，客户端得到 A 后随机生成对称加密密钥 X 用 A 加密发送给服务端，服务端用 A'解密得到 X，之后双方都用 X 加解密。 

这样在数据传输的过程中确实不能拿到 X，因为只有私钥才能解密。但是，攻击者可以劫持公钥 A，然后把 A 替换成自己的公钥 B，浏览器得到 B 后生成 X，这样攻击者就获取了 X，用 X 和服务端进行通信。 
  
造成的这样的原因是浏览器无法辨认公钥是不是来自目标服务器，因此产生了数字证书

### 数字证书

由CA机构颁发，证书里包含了持有者信息、公钥信息，相当于给网站颁发了一张"身份证"。但是证书有可能被篡改，如何防止证书被篡改？于是就出现了数字签名这种防伪技术

### 数字签名

数字签名就是将原文hash并用私钥加密后得到的签名串，客户端拿到证书后用 CA 的公钥对其进行解密得到的值和原文值进行比对来确认证书有没有早到篡改，因为证书存了对应的域名因此即使被掉包也不用担心，比对自己请求的域名就能识别出来。至于CA的公钥是预装在浏览器上的，所以无需担心其安全性。

[原文链接](https://zhuanlan.zhihu.com/p/43789231)


